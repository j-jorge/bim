# -*- cmake -*-

include(compiler-settings)

# Use the CMake config provided by Boost instead of the deprecated one
# provided by CMake.
if(POLICY CMP0167)
  cmake_policy(SET CMP0167 NEW)
endif()

if(BIM_HOST_BIN)
  set(AXSLCC_FIND_PROG_ROOT ${BIM_HOST_BIN})
endif()

# No versions here, because it I always forget to sync them with the
# versions from the setup scripts. See the files in
# setup/dependencies/recipes/ for the actual requirements.
find_package(axmol REQUIRED)
find_package(Boost REQUIRED)
find_package(EnTT REQUIRED)
find_package(fmt REQUIRED)

if (BIM_BUILD_BENCHMARKS)
  find_package(benchmark REQUIRED)
endif()

if (BIM_BUILD_TESTS)
  find_package(GTest REQUIRED)
endif()

if(BIM_ENABLE_TRACY)
  find_package(Tracy REQUIRED)
endif()

set(iscool_components
  audio
  http
  i18n
  net
  preferences
  random
  style
  system
)

if(BIM_BUILDING_FOR_ANDROID)
  set(iscool_components ${iscool_components} jni)
endif()

find_package(
  iscool-core 1.9.1
  REQUIRED
  COMPONENTS
  ${iscool_components}
)

add_subdirectory(modules)
add_subdirectory(apps)

add_subdirectory(assets)
